{% extends "base.html" %}
{% load staticfiles %}
{% load custom_filters %}

{% block content %}

<div class="sub-title">
    Event: {{ event.name }}
</div>

<div class="records-table">

    <div class="records-col">
        <div class="records-header-top"></div>
        <div class="records-header records-header-empty">
            <div class="records-cell">~</div>
        </div>
        {% for record in money_records %}
            <div class="records-cell expense-cell-id-{{ record.record_id }}">
                <a class="action-link action-link-edit" href="{{ record.url_edit }}">Edit</a>
            </div>
        {% endfor %}
        <div class="records-cell records-bottom-row"></div>

        <div class="records-footer">
            <div class="records-cell records-cell-strong"></div>
            <div class="records-cell records-cell-strong"></div>
        </div>
    </div>

    <div class="records-col">
        <div class="records-header-top"></div>
        <div class="records-header">
            <div class="records-cell">Date</div>
        </div>
        {% for record in money_records %}
            <div class="records-cell expense-cell-id-{{ record.record_id }}">{{ record.pub_date | date:"Y/m/d" }}</div>
        {% endfor %}
        <div class="records-cell records-bottom-row"></div>

        <div class="records-footer">
            <div class="records-cell"></div>
            <div class="records-cell"></div>
        </div>
    </div>

    <div class="records-col">
        <div class="records-header-top"></div>
        <div class="records-header">
            <div class="records-cell">Description</div>
        </div>
        {% for record in money_records %}
            <div class="records-cell expense-cell-id-{{ record.record_id }}">{{ record.description }}</div>
        {% endfor %}
        <div class="records-cell records-bottom-row">
            <a class="action-link action-link-add" href="{{ url_add_record }}"><img src="{% static 'images/16x16/add.png' %}"> add new</a>
        </div>

        <div class="records-footer">
            <div class="records-cell records-cell-strong">Total cost</div>
            <div class="records-cell records-cell-strong">Balance per person</div>
        </div>
    </div>

    <div class="records-col records-col-numeric" id="records-col-amount">
        <div class="records-header-top"></div>
        <div class="records-header">
            <div class="records-cell">Amount</div>
        </div>
        {% for record in money_records %}
            <div class="records-cell expense-cell-id-{{ record.record_id }}">{{ record.total_amount | money_amount_hide_zero }}</div>
        {% endfor %}
        <div class="records-cell records-bottom-row"></div>

        <div class="records-footer">
            <div class="records-cell records-cell-strong">{{ event_total | money_amount }}</div>
            <div class="records-cell records-cell-strong">{{ event_split | money_amount }}</div>
        </div>
    </div>

    {% for participant in participants %}
        <div class="records-col records-col-numeric records-col-person">
            <div class="records-header-top"></div>
            <div class="records-header records-header-person">
                <div class="records-cell">{{ participant.get_name }}</div>
            </div>
            {% for record in money_records %}
                <div class="records-cell expense-cell-id-{{ record.record_id }}">{{ record.contributions | get_item:participant | money_amount_hide_zero}}</div>
            {% endfor %}
            <div class="records-cell records-bottom-row"></div>

            <div class="records-footer">
                <div class="records-cell">{{ participant_total | get_item:participant | money_amount }}</div>
                <div class="records-cell">{{ participant_variance | get_item:participant | money_amount }}</div>
            </div>
        </div>
    {% endfor %}

</div>

{% endblock %}
